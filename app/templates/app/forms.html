<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>Valkyrie System</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <!-- Favicon  -->
    <link rel="icon" href="{% static 'app/img/core-img/favicon.ico'%}">

    <!-- Core Style CSS -->
    <link rel="stylesheet" href="{% static 'app/css/core-style.css'%}">
    <link rel="stylesheet" href="{% static 'app/css/style.css'%}">

    <!-- Responsive CSS -->
    <link href="{% static 'app/css/responsive.css'%}" rel="stylesheet">

</head>
<style>
    .doc:hover{background-color:#ff8a12;}
    td{padding:0px!important;}
    .card{background:#1d1d1de8;padding:10px;margin-bottom: 5px;}
    .card-header{ color:#ff8a12;font-size:20px; border-bottom:1px solid white;}
    .card-body{color:white;font-size:20px;}
     .wrapper{ border-radius:10px; background-position:center; background-size:cover;}
      #new-doc.show{ transform: translate3d(10px, 40px, 20px)!important;}
    @media (max-width:768px){
    #new-doc.show{ transform: translate3d(70px, 40px, 20px)!important;}
    label{display:none;}
    .card-header{font-size:18px}
    .card-body{padding:10px}
    #cid{border-top-left-radius:3px!important;
    border-bottom-left-radius:3px!important;}}
    @media (max-width:768px){.card-header{font-size:16px} th,td{font-size:15px}}


    .dropdown-toggle:hover{cursor:pointer;}











</style>
<body>
<!-- Preloader -->
<div id="preloader">
    <div class="showbox">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2"
                        stroke-miterlimit="10"></circle>
            </svg>
        </div>
    </div>
    <div class="questions-area text-center">
        <p>Please Wait...</p>
        <ul>
            <li>Valkyrie Blockchain Trade System</li>
        </ul>
    </div>
</div>

<!-- Gradient Background Overlay -->
<div class="gradient-background-overlay"></div>

<!-- Header Area Start -->
<header class="header-area bg-img" style="background-image: url(../../static/app/img/bg-img/14.jpg);">
    <div class="container-fluid h-100">
        <div class="row h-100 align-items-center">
            <div class="col-12 h-100">
                <div class="main-menu h-100">
                    <nav class="navbar h-100 navbar-expand-lg">
                        <!-- Logo Area  -->
                        <a class="navbar-brand" href="{% url 'index' %}"><img
                                src="{% static 'app/img/core-img/logo.png'%}"
                                alt="Logo"></a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#studioMenu"
                                aria-controls="studioMenu" aria-expanded="false" aria-label="Toggle navigation"><i
                                class="fa fa-bars"></i> Menu
                        </button>

                        <div class="collapse navbar-collapse" id="studioMenu">
                            <!-- Menu Area Start  -->
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item active">
                                    <a class="nav-link" href="{% url 'index' %}">Home </a>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link" href="{% url 'charts'%}">About</a>
                                </li>
                                <li class="nav-item dropdown" style="height:80px;border-top:5px solid #ffffff00;border-bottom:5px solid #ff8a12">
                                    <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown"
                                       aria-haspopup="true" aria-expanded="false"  >계약 관리</a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                        <a class="dropdown-item" href="{% url 'forms'%}" style="height:35px;border-top:5px solid #ffffff00;border-right:2px solid #ff8a12">계약 진행</a>
                                        <a class="dropdown-item" href="{% url 'osreceived'%}">받은 문서함</a>
                                    </div>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url 'mypage1'%}">MYPAGE</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="" data-toggle="modal"
                                       data-target="#logoutModal">LOGOUT</a>
                                </li>
                            </ul>
                            <!-- Search Form -->

                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Header Area End -->

<div id="user-info"><a><i class="fas fa-globe-europe"> IMPORTER&nbsp </i><i class="fas fa-user">&nbsp{{user_id}}</i></a></div>
<!--Valkyrie System Area Start -->
<br><br><br><br><br><br>
<section class="blog-area section_padding_100 mt-100">
            <div class="container">
           <!-- Tab panes -->
          <div class="tab-content">

            <div class="col-lg-12">
                <h2>계약 진행</h2>
                <hr>
                <div class = icon>
                    <table>
                        <tr style="vertical-align:top">
                            <td style="width:1000px; border-right:1px solid #FFFFFF; padding-left:30px; padding-right:20px; text-align:justify"><h5 class="page-header"><i class="fas fa-edit"></i> &nbsp1. 신용장(L/C) 신청서 작성</h5></td>
                            <td style="width:1000px; border-right:1px solid #FFFFFF; padding-left:30px; padding-right:20px; text-align:justify"><h5 class="page-header"><i class="fas fa-file-export"></i> &nbsp2. 신용장 신청서 작성 확인</h5></td>
                            <td style="width:1000px; border-right:1px solid #FFFFFF; padding-left:30px; padding-right:20px; text-align:justify"><h5 class="page-header"><i class="fas fa-file-export"></i> &nbsp3. 문서 전송하기</h5></td>
                        </tr>
                    </table>
                </div>
                <br>
                <div class="progress">
                  <div class="progress-bar w-25" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>

                <h5 style="color:orange;">English Only</h5><hr>

                <section class="blog-area section_padding_100 mt-100">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="container-fluid" style="margin:5px; margin-bottom:10px;">
                                    <!-- /.row -->
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="panel panel-default">
                                                <div class="panel-body">
                                                    <form role="form" method="post">
                                                        <div class="row">
                                                            <div class="col-lg-6">
                                                                <h4 class="panel-heading">
                                                                    <label>Contract ID.</label>
                                                                    <select class="custom-select" name="contract_id">
                                                                        {% for c in contract %}
                                                                        <option value="{{c.id}}">{{c.id}}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                    <hr>
                                                                    LETTER OF CREDIT REQUEST TITLE
                                                                </h4>

                                                                <input class="form-control" name="contractname" id="contractname">
                                                                <hr>
                                                                <div class="form-group">
                                                                    <label>1.Advising bank(ID):</label>
                                                                    <input class="form-control" name="a" id="a">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>2.Type:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="b">
                                                                        <option value="Sight">Sight</option>
                                                                        <option value="Banker's usance">Banker's usance</option>
                                                                        <option value="Shipper's usance">Shipper's usance</option>

                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>3.Beneficiary(ID):</label>
                                                                    <input class="form-control" name="c" id="c">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>4.Applicant(ID):</label>
                                                                    <input class="form-control" name="d" id="d" value="{{user_id}}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>5.L/C Amount and Tolerance:</label>
                                                                    <input class="form-control" name="e" id="e">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>6.Partial shipment:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="f">
                                                                        <option value="Allowed">Allowed</option>
                                                                        <option value="Not allowed">Not allowed</option>

                                                                    </select>
                                                                </div>

                                                            </div>
                                                            <!-- /.col-lg-6 (nested) -->
                                                            <div class="col-lg-6">
                                                                <div class="form-group">
                                                                    <label>7.Transshipment:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="g">
                                                                        <option value="Allowed">Allowed</option>
                                                                        <option value="Not allowed">Not allowed</option>

                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>8.Trnasport mode:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="h">
                                                                        <option value="Sea">Sea</option>
                                                                        <option value="Air">Air</option>
                                                                        <option value="Combined">Combined</option>
                                                                        <option value="Other">Other</option>

                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>9.Loading(shipment from):</label>
                                                                    <input class="form-control" name="i" id="i">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>10.Discharging(shipment to):</label>
                                                                    <input class="form-control" name="j" id="j">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>11.Latest shipment date:</label>
                                                                    <input class="form-control" type="date" name="k" id="k">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>12.All banking charges:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="l">
                                                                        <option value="Applicant">Applicant</option>
                                                                        <option value="Beneficiary">Beneficiary</option>

                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>13.Confirmation:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="m">
                                                                        <option value="Confirm">Confirm</option>
                                                                        <option value="May add">May add</option>
                                                                        <option value="Without">Without</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>14.T/T reimbursement:</label><br>
                                                                    <select style="width:300px; height:38px; border-radius:4px" name="n">
                                                                        <option value="Allowed">Allowed</option>
                                                                        <option value="Not allowed">Not allowed</option>

                                                                    </select>
                                                                </div>

                                                            </div>


                                                            <!-- /.col-lg-6 (nested) -->
                                                        </div>
                                                        <!-- /.row (nested) -->
                                                        <div style="text-align:center">
                                                            <hr>
                                                            <button id="submit" class="btn btn-outline-dark">작성 완료</button>
                                                            <button type="reset" class="btn btn-outline-dark">다시 작성하기</button>
                                                        </div>
                                                        {% csrf_token %}
                                                    </form>
                                                </div>
                                            </div>
                                            <!-- /.panel-body -->
                                        </div>
                                        <!-- /.panel -->
                                    </div>
                                    <!-- /.col-lg-12 -->
                                </div>
                                <!-- /.row -->
                            </div>
                        </div>

                        <!-- Sticky Footer -->

                    </section>
                    <!--Valkyrie System Area End -->

            </div>
            <!-- /.col-lg-12 -->

            <div id="menu1" class="container tab-pane fade"><br>
<form method="post">
    <section class="blog-area section_padding_100 mt-100">
        <div class="container">
            <div class="row justify-content-center">
                <div class="container-fluid" style="margin:5px; margin-bottom:10px;">

                    <form method="post">
                        <select class="custom-select" id="filter" name="filter" style="width:130px">
                            <option value="all">All</option>
                            <option value="new">New</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="rejected">Rejected</option>
                            <option value="complete">Complete</option>
                        </select>
                        <button class="btn btn-outline-dark" formaction="{% url 'ing' %}"> 조회</button>
                        {% csrf_token %}
                    </form>
                    <div class="row">
                        {% for c in result_list %}
                        <div class="col-lg-4 mb-4" style="margin-bottom:30px; margin-top:30px">

                            <input type="checkbox" id="{{c.id}}" name="check_id" value="{{ c.id }}"><a>Check</a>
                            <div class="card h-100">

                                <h5 class="card-header">
                                    <div id="status" style="color:orange">{{c.status}}</div>
                                    <hr>
                                    Contract ID.<br>{{c.contract_id}}
                                    <hr>
                                    {{c.contractname}}
                                </h5>
                                <div class="card-body">
                                    <h5>Document Hash:<br>{{c.sha256}}</h5>
                                </div>
                                <div class="card-footer">
                                    <a href="{% url 'download' %}?id={{ c.id }}" class="btn btn-outline-dark"
                                       target="_blank">
                                        View
                                    </a>
                                    <hr>
                                    <h6>To (은행ID):<br>{{c.share3}}</h6>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        <hr>
                    </div>

                    <hr>
                    <div class="wrapper">
                        {% if result_list.has_other_pages %}
                        <ul class="pagination" style="display: flex; justify-content: center;">
                            {% if result_list.has_previous %}
                            <li>
                                <a class="btn btn-outline-dark" href="?page={{ result_list.previous_page_number }}"
                                   style="border-top-left-radius:5px;border-bottom-left-radius:5px;">
                                    &laquo;
                                </a>
                            </li>
                            {% else %}
                            <li class="btn btn-outline-dark disabled"
                                style="border-top-left-radius:5px;border-bottom-left-radius:5px;">
                                <span>&laquo;</span></li>
                            {% endif %}

                            {% if result_list.number > 2 %}
                            <li><a href="?page={{ 1 }}" class="btn btn-outline-dark">
                                1
                            </a></li>
                            <li><span><a class="btn btn-outline-dark">...<span class="sr-only">...</span></a></span>
                            </li>
                            {% endif %}
                            {% for i in page_range %}
                            {% if result_list.number == i %}
                            <li class="btn btn-outline-dark active"><span style="color:white;">{{ i }}<span
                                    class="sr-only">(current)</span></span></li>
                            {% else %}
                            <li><a class="btn btn-outline-dark" href="?page={{ i }}">
                                {{ i }}
                            </a></li>
                            {% endif %}
                            {% endfor %}
                            {% if result_list.number < max_index %}
                            <li><span><a class="btn btn-outline-dark">...<span class="sr-only">...</span></a></span>
                            </li>
                            <li><a class="btn btn-outline-dark" href="?page={{ max_index|add:'2' }}">
                                {{ max_index|add:"2" }}
                            </a>
                            </li>
                            {% endif %}
                            {% if result_list.has_next %}
                            <li>
                                <a class="btn btn-outline-dark" href="?page={{ result_list.next_page_number }}"
                                   style="border-top-right-radius:5px;border-bottom-right-radius:5px;">
                                    &raquo;
                                </a>
                            </li>
                            {% else %}
                            <li>
                <span><a class="btn btn-outline-dark disabled"
                         style="border-top-right-radius:5px;border-bottom-right-radius:5px;">&raquo;</a></span>
                            </li>
                            {%endif %}
                        </ul>
                        {%endif%}
                    </div>

                    <div class="row">

                        <div style="text-align:center; margin:auto;">
                            <a>은행ID:</a>
                            <input class="form-control" name="share_user" type="text" id="share_user">
                            <br>
                            <a class="btn btn-outline-dark" id="submit"
                               data-toggle="modal"
                               data-target="#otpmodal">전송하기
                            </a>
                            <a class="btn btn-outline-dark" id="delete"
                               data-toggle="modal"
                               data-target="#deleteModal">선택삭제
                            </a>


                        </div>
                    </div>
                </div>

                <!--</form>-->
            </div>
            <div class="modal fade" id="otpmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Enter otp</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>
                        <div class="modal-body">Input your OTP Number:
                            <input id="otpnum" name="otp" class="form-control">
                        </div>
                        <div class="modal-footer">
                            <a class="btn" style="display:none;color:white;background:#ff8a12;" id="share">Send</a>
                            <a style="color:white;" class="btn btn-dark" data-dismiss="modal">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Are you sure?</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>
                        <div class="modal-body">Select "Delete" below if you are ready to delete your
                            documents.
                        </div>
                        <div class="modal-footer">
                            <a style="color:white;" class="btn btn-dark" data-dismiss="modal">Cancel</a>
                            <a class="btn" style="color:white;background:#ff8a12;" id="delete_btn">Delete</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sticky Footer -->


        </div>
        <!-- /.content-wrapper -->
    </section>
    {% csrf_token %}

</form>
<!--Valkyrie System Area End -->

            </div>

            <div id="menu2" class="container tab-pane fade"><br>
              <h3>Menu 2</h3>
              <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
            </div>
          </div>
    </div>

</section>
<!--Valkyrie System Area Start -->

<!-- Footer Area Start -->
<footer class="footer-area">
    <div class="container-fluid h-100">
        <div class="row h-100">
            <div class="col-12 h-100" style="padding-right:0px;">
                <div class="footer-content h-100 d-md-flex align-items-center justify-content-between">
                    <!-- Single Footer Content -->
                    <div class="single-footer-content">
                        <i class="fa fa-wifi"></i>
                        <a>valkyriesystem.online</a>
                    </div>
                    <!-- Single Footer Content -->
                    <div class="single-footer-content">
                        <i class="fa fa-copyright"></i>
                        <a>Operation Valkyrie</a>
                    </div>
                    <!-- Single Footer Content -->
                    <div style="height:50px;background:#ff7b07;padding:10px" class="single-footer-content">
                        <i class="fa fa-file-text-o"></i>
                        <a href="{% url 'user_manual' %}" target="_blank">User Manual</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Area End -->

<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <a style="color:white;" class="btn btn-dark" data-dismiss="modal">Cancel</a>
                <a class="btn" style="color:white;background:#ff8a12;" href="{% url 'logout' %}">Logout</a>
            </div>
        </div>
    </div>
</div>
<!-- jQuery (Necessary for All JavaScript Plugins) -->
<script src="{% static 'app/js/jquery/jquery-2.2.4.min.js'%}"></script>
<!-- Popper js -->
<script src="{% static 'app/js/popper.min.js'%}"></script>
<!-- Bootstrap js -->
<script src="{% static 'app/js/bootstrap.min.js'%}"></script>
<!-- Plugins js -->
<script src="{% static 'app/js/plugins.js'%}"></script>
<!-- Active js -->
<script src="{% static 'app/js/active.js'%}"></script>

</body>
<script>

$("#cid").keyup(function(){
        $.ajax({
            url:'/checkcontract/',
            type:'post',
            data:$('form').serialize(),
            success:function(res){
                if(res.result == 'exist'){
                     $('#cid').css("border", "#00ff3b solid 2px");
                }else{
                    $('#cid').css("border", "#ff0000 solid 2px");
                }
            }
        });
    });

function toggleContent(obj) {
    var id = obj.id;

    var contentBox = document.getElementsByName(id)[0];

    if(contentBox.style.display == "inline-block") {
    contentBox.style.display = "none";
    }
    else {
    contentBox.style.display = "inline-block";
    }
}

$('#submit').click(function(){
    var contractname = $('#contractname').val();
    var a = $('#a').val();
    var c = $('#c').val();
    var d = $('#d').val();
    var e = $('#e').val();
    var j = $('#j').val();
    var i = $('#i').val();


    if (contractname.length == 0 ){
        alert("LETTER OF CREDIT REQUEST TITLE를 입력하세요");
        $('#contractname').focus();
        return false;
    }else if (a.length == 0){
        alert("1.Advising bank를 입력하세요");
        $('#a').focus();
        return false;
    }else if(c.length == 0){
        alert("3.Beneficiary를 입력하세요");
        $('#c').focus();
        return false;
    }else if(d.length == 0){
        alert("4.Applicant를 입력하세요");
        $('#d').focus();
        return false;
    }else if(e.length == 0){
        alert("5.L/C Amount and Tolerance를 입력하세요");
        $('#e').focus();
        return false;
    }else if(i.length == 0){
        alert("10.Loading(shipment from)를 입력하세요");
        $('#i').focus();
        return false;
    }else if(j.length == 0){
        alert("11.Discharging(shipment to)를 입력하세요");
        $('#j').focus();
        return false;
    }else{
        $.ajax({
            url:'/submit/',
            type:'post',
            data:$('form').serialize(),
            success:function(res){
                alert(res.result)
                if (res.result == "작성완료") {
                    location = '/LCR/'
                }else{
                    return false;
                }
            }
        });
    return false;
    }
});


$('#submit').click(function(){
    var contractname = $('#contractname').val();

    if (contractname.length == 0 ){
        alert("LETTER OF CREDIT REQUEST TITLE를 입력하세요");
        $('#contractname').focus();
        return false;
    }else{
        $.ajax({
            url:'/submit/',
            type:'post',
            data:$('form').serialize(),
            success:function(res){
                alert(res.result)
                if (res.result == "작성완료") {
                    location = '/LCR/'
                }else{
                    return false;
                }
            }
        });
    return false;
    }
});


</script>


</html>